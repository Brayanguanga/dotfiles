sourceDir: "{{ .chezmoi.sourceDir }}"

{{- $codespaces:= env "CODESPACES" | not | not -}}

{{- if $codespaces }}
{{- /* Codespaces dotfiles setup is non-interactive, so set defaults */}}
data:
{{- if empty (env "USER") }}
  user: "user"
{{- else }}
  user: {{ env "USER" }}
{{- end }}
  name: name
  email: name@host.local
{{- else }}
{{- /* Interactive setup, so prompt for input */}}
data:
{{- if empty (env "USER") }}
  user: {{ promptString "user" }}
{{- else }}
  user: {{ env "USER" }}
{{- end }}
{{- if empty (env "NAME") }}
  name: {{ promptString "name" }}
{{- else }}
  name: {{ env "NAME" }}
{{- end }}
{{- if empty (env "EMAIL") }}
  email: {{ promptString "email" }}
{{- else }}
  email: {{ env "EMAIL" }}
{{- end }}
{{- end }}